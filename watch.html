<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nonton Anime - AnimeFlix</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/video.js/7.20.3/video-js.min.css">
    <link href="https://vjs.zencdn.net/7.20.3/video-js.css" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body class="watch-page">
    <!-- Top Bar -->
    <div class="watch-header">
        <a href="dashboard.html" class="back-btn">
            <i class="fas fa-arrow-left"></i> Kembali
        </a>
        <h1 id="animeTitle">Loading...</h1>
        <div class="watch-actions">
            <button onclick="toggleSubtitle()">
                <i class="fas fa-closed-captioning"></i> Sub
            </button>
            <button onclick="toggleQuality()">
                <i class="fas fa-hd"></i> Quality
            </button>
            <button onclick="toggleFullscreen()">
                <i class="fas fa-expand"></i> Fullscreen
            </button>
        </div>
    </div>

    <!-- Main Player Area -->
    <div class="player-container">
        <div class="video-wrapper">
            <!-- Video.js Player -->
            <video id="animePlayer" class="video-js vjs-default-skin vjs-big-play-centered" 
                   controls preload="auto" width="100%" height="100%"
                   data-setup='{"fluid": true, "aspectRatio": "16:9"}'>
                <source id="videoSource" src="" type="application/x-mpegURL">
                <track kind="subtitles" src="https://pastebin.com/raw/sample.srt" srclang="id" label="Indonesian" default>
                <p class="vjs-no-js">
                    Untuk menonton video ini aktifkan JavaScript, dan pertimbangkan upgrade ke web browser yang
                    <a href="https://videojs.com/html5-video-support/" target="_blank">mendukung HTML5 video</a>
                </p>
            </video>

            <!-- Custom Controls -->
            <div class="custom-controls">
                <div class="progress-bar">
                    <div class="progress" id="videoProgress"></div>
                </div>
                <div class="control-buttons">
                    <button onclick="skipBackward()"><i class="fas fa-backward"></i> -10s</button>
                    <button onclick="togglePlay()" id="playBtn"><i class="fas fa-play"></i> Play</button>
                    <button onclick="skipForward()"><i class="fas fa-forward"></i> +10s</button>
                    <div class="volume-control">
                        <i class="fas fa-volume-up"></i>
                        <input type="range" min="0" max="100" value="100" id="volumeSlider">
                    </div>
                </div>
            </div>
        </div>

        <!-- Episode List -->
        <div class="episode-sidebar">
            <div class="episode-header">
                <h3><i class="fas fa-list"></i> Daftar Episode</h3>
                <select id="seasonSelect">
                    <option value="1">Season 1</option>
                    <option value="2">Season 2</option>
                </select>
            </div>
            <div class="episode-list" id="episodeList">
                <!-- Episode list loaded dynamically -->
            </div>
        </div>
    </div>

    <!-- Anime Info -->
    <div class="anime-info-section">
        <div class="anime-poster">
            <img id="animePoster" src="" alt="Anime Poster">
        </div>
        <div class="anime-details">
            <h2 id="detailTitle">Loading...</h2>
            <div class="anime-meta">
                <span class="rating"><i class="fas fa-star"></i> <span id="animeRating">9.0</span>/10</span>
                <span class="year"><i class="fas fa-calendar"></i> <span id="animeYear">2024</span></span>
                <span class="status"><i class="fas fa-circle"></i> <span id="animeStatus">Ongoing</span></span>
            </div>
            <div class="anime-genres" id="animeGenres">
                <!-- Genres loaded here -->
            </div>
            <p class="synopsis" id="animeSynopsis">Loading synopsis...</p>
            <div class="action-buttons">
                <button class="btn-favorite" onclick="toggleFavorite()">
                    <i class="far fa-heart"></i> Tambah Favorit
                </button>
                <button class="btn-download" onclick="downloadEpisode()">
                    <i class="fas fa-download"></i> Download Episode
                </button>
                <button class="btn-share" onclick="shareAnime()">
                    <i class="fas fa-share"></i> Bagikan
                </button>
            </div>
        </div>
    </div>

    <!-- Recommended Section -->
    <div class="recommended-section">
        <h3><i class="fas fa-film"></i> Anime Serupa</h3>
        <div class="recommended-grid" id="similarAnime">
            <!-- Similar anime loaded here -->
        </div>
    </div>

    <!-- Video Source Selector Modal -->
    <div id="sourceModal" class="modal">
        <div class="modal-content">
            <h3><i class="fas fa-server"></i> Pilih Sumber Video</h3>
            <div class="source-list">
                <div class="source-item active" data-source="https://bitdash-a.akamaihd.net/s/content/media/Manifest.m3u8">
                    <span class="source-name">Server 1 (HD)</span>
                    <span class="source-quality">1080p</span>
                </div>
                <div class="source-item" data-source="https://test-streams.mux.dev/x36xhzz/x36xhzz.m3u8">
                    <span class="source-name">Server 2 (SD)</span>
                    <span class="source-quality">720p</span>
                </div>
                <div class="source-item" data-source="https://content.jwplatform.com/manifests/vM7nH0Kl.m3u8">
                    <span class="source-name">Server 3 (Backup)</span>
                    <span class="source-quality">480p</span>
                </div>
            </div>
            <button class="btn-apply" onclick="applySource()">Terapkan</button>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://vjs.zencdn.net/7.20.3/video.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <script src="player.js"></script>
    <script src="script.js"></script>
</body>
</html>